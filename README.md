## Using Terraform 

https://developer.hashicorp.com/tutorials/library?product=terraform

## Installing on Linux

```bash
sudo apt-get update && sudo apt-get install -y gnupg software-properties-common
wget -O- https://apt.releases.hashicorp.com/gpg | \
    gpg --dearmor | \
    sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg
gpg --no-default-keyring \
    --keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg \
    --fingerprint
echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
    https://apt.releases.hashicorp.com $(lsb_release -cs) main" | \
    sudo tee /etc/apt/sources.list.d/hashicorp.list
sudo apt update
sudo apt-get install terraform

#enable zsh completeion

touch ~/.zshrc
terraform -install-autocomplete
source ~/.zshrc
```

## Test Install with Docker Provider

```bash
 echo -e "terraform {
  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = ">= 2.13.0"
    }
  }
}

provider "docker" {
  host    = "npipe:////.//pipe//docker_engine"
}

resource "docker_image" "nginx" {
  name         = "nginx:latest"
  keep_locally = false
}

resource "docker_container" "nginx" {
  image = docker_image.nginx.latest
  name  = "tutorial"
  ports {
    internal = 80
    external = 8000
  }
}" > main.tf
```
```bash 
terraform init
terraform apply
terraform destroy
```
## Using terraform graph 

### Install GraphViz first 

```bash 
sudo apt install graphviz
```

### Then can visualize execution plans to resource graph 

```bash
terraform graph | dot -Tsvg > graph.svg
```